{% extends "base.html" %}

{% block title %}Detector de Latas - EcoPuntos{% endblock %}

{% block content %}
<div class="container">
    <div class="detector-header">
        <h1>游닝 Detector de Latas de Aluminio</h1>
        <p>Coloca una lata frente a la c치mara para ganar puntos</p>
    </div>
    
    <div class="detector-stats">
        <div class="detector-stat">
            <span class="stat-label">Puntos:</span>
            <span class="stat-value" id="current-points">{{ user.points }}</span>
        </div>
        <div class="detector-stat">
            <span class="stat-label">Latas detectadas hoy:</span>
            <span class="stat-value" id="cans-today">{{ user.cans_detected }}</span>
        </div>
    </div>
    
    <div class="detector-container">
        <div class="video-section">
            <video id="video" autoplay playsinline></video>
            <canvas id="canvas" style="display: none;"></canvas>
            
            <div class="detection-overlay" id="detection-overlay" style="display: none;">
                <div class="detection-box"></div>
                <span class="detection-label">춰Lata detectada! 游볾</span>
            </div>
            
            <div class="video-controls">
                <button id="start-camera" class="btn btn-primary">Iniciar C치mara</button>
                <button id="stop-camera" class="btn btn-secondary" style="display: none;">Detener C치mara</button>
                <button id="simulate-detection" class="btn btn-success" style="display: none;">
                    Simular Detecci칩n (Demo)
                </button>
            </div>
        </div>
        
        <div class="detection-info">
            <h3>游눠 Instrucciones</h3>
            <ul>
                <li>Haz clic en "Iniciar C치mara" para activar la detecci칩n</li>
                <li>Coloca una lata de aluminio frente a la c치mara</li>
                <li>El sistema detectar치 autom치ticamente la lata usando IA</li>
                <li>Recibir치s 1 punto por cada lata detectada</li>
                <li>Los puntos se actualizar치n en tiempo real</li>
            </ul>
            
            <div class="detection-log">
                <h4>游닇 Registro de Detecciones</h4>
                <div id="detection-log" class="log-content">
                    <p class="log-empty">Esperando detecciones...</p>
                </div>
            </div>
            
            <div class="info-box">
                <h4>游뱄 Sobre la IA</h4>
                <p>El sistema utiliza modelos de visi칩n por computadora (YOLO/OpenCV) para detectar latas de aluminio en tiempo real.</p>
                <p class="note"><strong>Nota:</strong> La detecci칩n con IA a칰n no est치 implementada. Usa el bot칩n "Simular Detecci칩n" para probar el sistema.</p>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/detector.js') }}"></script>
{% endblock %}
